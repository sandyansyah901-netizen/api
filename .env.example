# ==========================================
# APPLICATION
# ==========================================
APP_NAME=Manga Reader API
VERSION=3.1.0
ENVIRONMENT=development
DEBUG=True

# ==========================================
# DATABASE
# ==========================================
DATABASE_URL=mysql+pymysql://root:sandy0404@localhost:3306/manga_reader
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=3600
DB_ECHO=False

# ==========================================
# SECURITY
# ==========================================
SECRET_KEY=eoBx7sjtEU0EfveMABmH2yJczqRkmfRV-cNLVgDY4rk
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080
BCRYPT_ROUNDS=12

# ==========================================
# CORS
# ==========================================
CORS_ORIGINS=["http://localhost:3000","http://localhost:8080","http://127.0.0.1:3000"]
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# ==========================================
# ✅ RCLONE - GROUP 1 (PRIMARY GROUP)
# ==========================================

# Primary remote (untuk upload group 1)
RCLONE_PRIMARY_REMOTE=gdrive

# Backup remotes group 1 (comma-separated)
RCLONE_BACKUP_REMOTES=gdrive1

# ==========================================
# ✅ RCLONE - GROUP 2 (NEXT GROUP - aktif saat group 1 penuh)
# Path di DB ditandai dengan prefix @
# ==========================================

# Next primary remote (untuk upload saat group 1 penuh)
RCLONE_NEXT_PRIMARY_REMOTE=

# Next backup remotes (comma-separated)
RCLONE_NEXT_BACKUP_REMOTES=

# Quota limit group 1 dalam GB (0 = unlimited / auto-detect)
# Set ke 1900 untuk safety margin sebelum 2TB penuh
RCLONE_GROUP1_QUOTA_GB=1900

# Enable auto-switch ke group 2 saat group 1 penuh
RCLONE_AUTO_SWITCH_GROUP=True

# ==========================================
# ✅ RCLONE GENERAL SETTINGS
# ==========================================
RCLONE_AUTO_BACKUP_ENABLED=True
RCLONE_LOAD_BALANCING_STRATEGY=round_robin
RCLONE_EXECUTABLE=rclone
RCLONE_CACHE_DIR=./storage/temp
RCLONE_CACHE_EXPIRY_HOURS=24
RCLONE_MAX_RETRIES=3
APP_RCLONE_TIMEOUT=30
RCLONE_AUTO_RECOVERY_ENABLED=True
RCLONE_QUOTA_RESET_HOURS=24

# ==========================================
# ✅ RCLONE SERVE HTTP MODE
# ==========================================
RCLONE_SERVE_HTTP_ENABLED=True
RCLONE_SERVE_HTTP_PORT_START=8180
RCLONE_SERVE_HTTP_FALLBACK=True
RCLONE_SERVE_HTTP_STARTUP_TIMEOUT=10
RCLONE_SERVE_HTTP_VFS_CACHE_MODE=full
RCLONE_SERVE_HTTP_BUFFER_SIZE=256M
RCLONE_SERVE_HTTP_VFS_CACHE_MAX_SIZE=1G
RCLONE_SERVE_HTTP_VFS_CACHE_MAX_AGE=1h
RCLONE_SERVE_HTTP_HEALTH_CHECK_INTERVAL=30
RCLONE_SERVE_HTTP_AUTO_RESTART=True
RCLONE_SERVE_HTTP_MAX_RESTART_ATTEMPTS=3

# ==========================================
# COVER IMAGES
# ==========================================
COVERS_DIR=./storage/covers
COVERS_BACKUP_GDRIVE_PATH=manga_covers
COVERS_MAX_SIZE_MB=5
COVERS_ALLOWED_TYPES=["image/jpeg","image/png","image/webp"]

# ==========================================
# RATE LIMITING
# ==========================================
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# ==========================================
# CACHE
# ==========================================
CACHE_PERSISTENT_PAGES=True
CACHE_CLEANUP_INTERVAL_HOURS=1
CACHE_MAX_SIZE_GB=10

# ==========================================
# PAGINATION
# ==========================================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# ==========================================
# LOGGING
# ==========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_REQUESTS=True
LOG_REQUEST_BODY=False
LOG_RESPONSE_BODY=False

# ==========================================
# SENTRY (Optional)
# ==========================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==========================================
# REDIS (Optional)
# ==========================================
REDIS_ENABLED=False
REDIS_URL=redis://localhost:6379/0
REDIS_CACHE_TTL=300

# ==========================================
# FILE UPLOAD
# ==========================================
MAX_UPLOAD_SIZE_MB=10
ALLOWED_IMAGE_TYPES=["image/jpeg","image/png","image/webp"]

# ==========================================
# BACKGROUND TASKS
# ==========================================
BACKGROUND_TASK_ENABLED=True
BACKGROUND_DOWNLOAD_SKIP_FIRST=True